<html lang="en" prefix="og: http://ogp.me/ns#" debug="true" class="wf-myriadpro-n4-active wf-myriadpro-n6-active wf-active"><head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
    <meta charset="utf-8">
<meta name="mobile-web-app-capable" content="yes">
    <title>PrakharGyan ePaper</title>

    <meta name="description" content="Latest news on your finger tips. Touch a news article to read, and stay updated!">
    <meta name="viewport" content="width = device-width, initial-scale = 1.0"> 

    <meta name="author" content="Rajesh Agnihotri">
    <link rel="canonical" href="http://prakhargyan.com">

    <meta property="og:url" content="http://prakhargyan.com">
    <meta property="og:title" content="Prakhar Gyan | प्रखर ज्ञान">
    <meta property="og:description" content="Latest news on your finger tips. Touch an article to read, and stay updated.">
    <meta property="og:image" content="http://photoswipe.com/test/horizontal-swipe.jpg">

    <link href="https://plus.google.com/102586375605352607718" rel="publisher">

  
    <link rel="icon apple-touch-icon" href="test/apple-touch-icon-144x144.png" sizes="144x144" type="image/png">
    <link href="http://photoswipe.com/site-assets/site.css?v=4.1.1-1.0.4" rel="stylesheet">
    <link href="http://photoswipe.com/dist/photoswipe.css?v=4.1.1-1.0.4" rel="stylesheet">
    <link href="http://photoswipe.com/dist/default-skin/default-skin.css?v=4.1.1-1.0.4" rel="stylesheet">
    
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"  crossorigin="anonymous"></script>

    
      <script type="text/javascript" async="" src="http://mc.yandex.ru/metrika/watch.js"></script><script async="" src="//www.google-analytics.com/analytics.js"></script>
      <script src="http://photoswipe.com/dist/photoswipe.min.js?v=4.1.1-1.0.4"></script>
      <script src="http://photoswipe.com/dist/photoswipe-ui-default.min.js?v=4.1.1-1.0.4"></script>
    

   
  
<style type="text/css">
    
html, body { background: #000000 ; margin:0; padding:0; overflow:hidden; }
svg { position:fixed; top:0; bottom:0; left:0; right:0 ;
margin-top:0px; 
}





#top
{

width:100%;
height: calc(80%);

}

#bottom
{


width:100%;
height: calc(20% - 4px);

}

.containment {
    /*transform: rotate(-90deg);*/
  /*transform-origin:80% 10%;*/
    /*background: white;*/
    width: auto;
    height: calc(100% - 00px);
    overflow-x: scroll;
overflow-y: hidden;
  text-align: center;
  border-radius: 10px;
  box-shadow: inset 0 0 20px black;
   white-space: nowrap;

    }

.unit {
 
    height: 100%;
  /*width: 200px;*/
  margin-left: 8px;
  margin-right: 8px;
  padding-top: 4px;
  padding-bottom: 4px;
  /*margin: 15px;*/
  display: inline-block;
  /*box-shadow: 0 0 10px #222;*/
    }

@import "compass/css3";

@import "compass";

/* VARIABLES */
$header-bg: #3f51b5;
$menu-width: 250px!default;

/* BASE */
html,
body {
  font-family: 'Roboto', sans-serif;
  font-size: 1em;
  line-height: 1.4;
  height: 100%;
  
  margin: 0;
  padding: 0;
}

a {
  text-decoration: none;
  color: inherit;
}

.container {
  @include clearfix;
  margin: 0 20px;
}



/* HEADER */
.header {
  display: none;
  position: fixed;
  left: 0;
  right: 0;
  height: 38px;
  margin-bottom: 5px;
  /*line-height: 45px;*/
  color: #fff;
  
  background-color: $header-bg;
}

.header__logo {
  font-weight: 700;
  padding: 0 25px;
  float: left;
}

/* MENU */


/* RESPONSIVE */



  
  .header {
    position: static;
  }
  
  .header__icon {
    position: relative;
    display: block;
    float: left;
    width: 50px;
    height: 30px;
    
 }


header
{

background: #212121;

}

</style>

  <body>


    
    <header class="header">
      
      <a href="#" class="header__icon" id="header__icon"></a>
      <a href="#" class="header__logo">Logo</a>
      
     
        <a href="#">Home</a>
        <a href="#">About</a>
        <a href="#">Blog</a>
      
    


      
    </header>



<div  id="top">
    
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>



</div>


<div  id="bottom">
    
<div class="containment">
  

</div>


</div>

    </body>
    <script type="text/javascript">

var pswpElement = document.querySelectorAll('.pswp')[0];

// build items array


items = []
// define options (if needed)


// Initializes and opens PhotoSwipe
function initGallery(index)
{

    var options = {
    // optionName: 'option value'
    // for example:
closeOnScroll: false,

    maxSpreadZoom: 10 ,
    index:index || 0 // start at first slide
};
// alert(index)

var gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);


gallery.listen('gettingData', function(index, item) {



        if (item.w < 1 || item.h < 1) { // unknown size
        var img = new Image(); 
        img.onload = function() { // will get size after load
        item.w = this.width; // set image width
        item.h = this.height; // set image height
           gallery.invalidateCurrItems(); // reinit Items
           gallery.updateSize(true); // reinit Items

           // console.log(item.w)
           // console.log(item.h)




        }
    img.src = item.src; // let's download image
    }
});


gallery.init();
}
    </script>



<script type="text/javascript">



function parseInfo( index)
{


    index = index || 0
items = []
  
$('svg').fadeOut()

$.get('/readEpaper/' + Data[index]._id , function(a){
console.log('_______')
console.log(Data[index])


var MainImageQuality = "HD"


if(a.length > 0)
for(var b of a)
{
  
var SubArticlesImages = b.SubArticlesImages;


console.log('POP'  , SubArticlesImages.length)

var POP = SubArticlesImages.pop()
console.log('pop' , POP)
var SVG = POP.SVG;

var parser = new DOMParser();
var _doc = parser.parseFromString(SVG ,  "text/xml");
var _parent  =_doc.getElementsByTagName('svg')[0]


var cntr= 0;
var hyperlink = "javascript:initGallery("+ cntr +")"


_parent.innerHTML =  '<a href="' + hyperlink +'">' +  _parent.innerHTML  + '</a>'

items.push( {  w:0 , h:0 , src: POP.Location} )



b.Location = b.Location.replace('/fd' , '/hd')

var image = document.createElement('image')
image.setAttribute('preserveAspectRatio' , 'xMinYMin slice')
image.setAttribute('width' , '100%')
image.setAttribute('height' , '100%')
image.setAttribute('x' , '0')
image.setAttribute('y' , '0')
image.setAttributeNS( 'http://www.w3.org/1999/xlink' ,  'xlink:href' , "https://prakhargyan.s3.ap-south-1.amazonaws.com/" + b.Location)


// image.setAttributeNS( 'http://www.w3.org/1999/xlink' ,  'xlink:href' , "https://prakhargyan.s3.ap-south-1.amazonaws.com/" + Data[index].Articles[MainImageQuality][0].Image)






_parent.innerHTML = '<style type="text/css">image{} .article{ opacity: 0.5;fill:transparent; }  .article:hover {fill:black;  opacity: 1.0; stroke: white;stroke-width: 4px; } </style>'  + image.outerHTML + "</image>"+ _parent.innerHTML





// _parent.innerHTML =image.outerHTML + "</image>"+ _parent.innerHTML


$('svg').remove()
for(var c of SubArticlesImages)
{

  console.log('pop' , c)
    cntr++;

  var SVG = c.SVG;


var parser = new DOMParser();
var doc = parser.parseFromString(SVG ,  "text/xml");
var parent  =doc.getElementsByTagName('svg')[0]

// _parent.innerHTML +='<g stroke="green" fill="white" stroke-width="5">'  + parent.innerHTML + "</g>"

items.push( {  w:0 , h:0 , src: c.Location} )

var hyperlink = "javascript:initGallery("+ (cntr  ) +")"

console.log(  'loda' , (cntr) )


_parent.innerHTML +=  '<a href="' + hyperlink +'">' +  parent.innerHTML  + '</a>'




}

cntr = 0

$(_parent).find('path').attr('fill-opacity', '0.1');
$(_parent).find('path').attr('fill', 'transparent');
$(_parent).find('path').attr('class', 'article');



// _parent.innerHTML = "<center>" + _parent.innerHTML + "</center>"


document.getElementById('top').insertAdjacentElement( 'afterbegin' , _parent);

$('svg').hide().fadeIn()

$('svg').attr('width' , "100%" )   
$('svg').attr('height' ,   "calc(80% )" )  
// $('svg').find('path')attr("fill", "black");


}
else

{


console.log('ELSE')

{
  

var SVG = '<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="100%" height="80%" viewBox="0 0 3521.000000 5313.000000" preserveAspectRatio="xMidYMid meet" style="display: block;"></svg>'

var parser = new DOMParser();
var _doc = parser.parseFromString(SVG ,  "text/xml");
var _parent  =_doc.getElementsByTagName('svg')[0]


var cntr= 0;
var hyperlink = "javascript:initGallery("+ cntr +")"


_parent.innerHTML =  '<a href="' + hyperlink +'">' +  _parent.innerHTML  + '</a>'

// items.push( {  w:0 , h:0 , src: 'POP.Location'} )




var image = document.createElement('image')
image.setAttribute('preserveAspectRatio' , 'xMinYMin slice')
image.setAttribute('width' , '100%')
image.setAttribute('height' , '100%')
image.setAttribute('x' , '0')
image.setAttribute('y' , '0')


image.setAttributeNS( 'http://www.w3.org/1999/xlink' ,  'xlink:href' , "https://prakhargyan.s3.ap-south-1.amazonaws.com/" + Data[index].Articles[MainImageQuality][0].Image)





_parent.innerHTML = '<style type="text/css">.article{ opacity: 0.5;fill:transparent; }  .article:hover {fill:transparent;  opacity: 1.0; stroke: white;stroke-width: 4px; } </style>'  + image.outerHTML + "</image>"+ _parent.innerHTML





// _parent.innerHTML =image.outerHTML + "</image>"+ _parent.innerHTML


$('svg').remove()




$(_parent).find('path').attr('fill-opacity', '0.1');
$(_parent).find('path').attr('fill', 'transparent');
$(_parent).find('path').attr('class', 'article');



// _parent.innerHTML = "<center>" + _parent.innerHTML + "</center>"


document.getElementById('top').insertAdjacentElement( 'afterbegin' , _parent);

$('svg').hide().fadeIn()

$('svg').attr('width' , "100%" )   
$('svg').attr('height' ,   "80%" )  
// $('svg').find('path')attr("fill", "black");


}



}


})





}


// parseInfo()
    // $('img[usemap]').rwdImageMaps();

var Data = []

function getPDFByDate(date)
{

$.get('/getConvertedPdf/' + date, function(success){


bottomSlider(success )

Data = success

parseInfo(0)

})

}


function bottomSlider(data)
{

  var cntr = 0



for(var _d of data)
{

// for(var __d of _d.Articles.THUMB.splice(0,1))
var __d = _d.Articles.THUMB[0]

{
  // console.log(__d.Image)

  var img = document.createElement('img');
  img.setAttribute('class' , 'unit')
  img.src ="https://prakhargyan.s3.ap-south-1.amazonaws.com/" + __d.Image
img.setAttribute('onclick' , "parseInfo(" +cntr +  ")" )

$('.containment').append( img )


}
cntr = cntr + 1;



}


}

function getCurrentFolder()
{
var datae = new Date()
return ( "0000" + datae.getFullYear() ).slice(-4) + ( "0000" + (datae.getMonth() + 1) ).slice(-2)  + ( "0000" + datae.getDate() ).slice(-2) ;

}



getPDFByDate(getCurrentFolder())


// bottomSlider('baba')
</script>



  
</html>